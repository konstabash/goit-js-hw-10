{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst refs = {\n    inputField: document.querySelector(\"input#datetime-picker\"),\n    startButton: document.querySelector(\".start-button\"),\n    clockFace: document.querySelector(\"div.timer\"),\n    clockDays: document.querySelector('[data-days]'),\n    clockHours: document.querySelector('[data-hours]'),\n    clockMinutes: document.querySelector('[data-minutes]'),\n    clockSeconds: document.querySelector('[data-seconds]'),\n};\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    position: \"below\",\n    onClose(selectedDates) {\n        if (selectedDates[0] <= new Date()) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Please choose a date in the future'\n            });\n            refs.startButton.classList.remove(\"is-active\");\n            return;\n        };\n        timer.userSelectedDate = selectedDates[0];\n        refs.startButton.classList.add(\"is-active\");\n        refs.startButton.disabled = false;\n        refs.startButton.addEventListener(\"click\", handleStartButtonClick);\n    },\n};\n\n\nconst timer = {\n    userSelectedDate: null,\n    intervalId: null,\n    startCounting() {\n        refs.startButton.classList.remove(\"is-active\");\n        refs.inputField.disabled = true;\n        refs.startButton.disabled = true;\n        refs.startButton.removeEventListener(\"click\", handleStartButtonClick);\n        this.intervalId = setInterval(() => {\n    this.tick();\n}, 1000);\n    },\n\n    tick() {\n        const currentTime = Date.now();\n        const ms = this.userSelectedDate - currentTime;\n        if (ms <= 0) {\n            clearInterval(this.intervalId);\n            this.userSelectedDate = null;\n            refs.inputField.disabled = false;\n            refs.startButton.disabled = false;\n            iziToast.info({\n    message: 'Ring-ring!'\n});\n            return;\n        };\n        const clockDetails = this.convertMs(ms);\n        const finalClock = addLeadingZero(clockDetails);\n        refs.clockDays.textContent = finalClock.days;\n        refs.clockHours.textContent = finalClock.hours;\n        refs.clockMinutes.textContent = finalClock.minutes;\n        refs.clockSeconds.textContent = finalClock.seconds;\n    },\n\n    convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n},\n\n};\n\nfunction addLeadingZero({ days, hours, minutes, seconds }) {\n        const dayNumber = days.toString().length < 2 ? 2 : days.toString().length;\n    days = days.toString().padStart(dayNumber, \"0\");\n    hours = hours.toString().padStart(2, \"0\");\n    minutes = minutes.toString().padStart(2, \"0\");\n    seconds = seconds.toString().padStart(2, \"0\");\n\n    return { days, hours, minutes, seconds };\n};\n\nfunction handleStartButtonClick() {\n    timer.startCounting();\n}\n\n\nflatpickr(refs.inputField, options);"],"names":["refs","options","selectedDates","iziToast","timer","handleStartButtonClick","currentTime","ms","clockDetails","finalClock","addLeadingZero","days","hours","minutes","seconds","dayNumber","flatpickr"],"mappings":"+IAKA,MAAMA,EAAO,CACT,WAAY,SAAS,cAAc,uBAAuB,EAC1D,YAAa,SAAS,cAAc,eAAe,EACnD,UAAW,SAAS,cAAc,WAAW,EAC7C,UAAW,SAAS,cAAc,aAAa,EAC/C,WAAY,SAAS,cAAc,cAAc,EACjD,aAAc,SAAS,cAAc,gBAAgB,EACrD,aAAc,SAAS,cAAc,gBAAgB,CACzD,EAEMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,SAAU,QACV,QAAQC,EAAe,CACnB,GAAIA,EAAc,CAAC,GAAK,IAAI,KAAQ,CAChCC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCACzB,CAAa,EACDH,EAAK,YAAY,UAAU,OAAO,WAAW,EAC7C,MAEZ,CAAQI,EAAM,iBAAmBF,EAAc,CAAC,EACxCF,EAAK,YAAY,UAAU,IAAI,WAAW,EAC1CA,EAAK,YAAY,SAAW,GAC5BA,EAAK,YAAY,iBAAiB,QAASK,CAAsB,CACpE,CACL,EAGMD,EAAQ,CACV,iBAAkB,KAClB,WAAY,KACZ,eAAgB,CACZJ,EAAK,YAAY,UAAU,OAAO,WAAW,EAC7CA,EAAK,WAAW,SAAW,GAC3BA,EAAK,YAAY,SAAW,GAC5BA,EAAK,YAAY,oBAAoB,QAASK,CAAsB,EACpE,KAAK,WAAa,YAAY,IAAM,CACxC,KAAK,KAAI,CACb,EAAG,GAAI,CACF,EAED,MAAO,CACH,MAAMC,EAAc,KAAK,MACnBC,EAAK,KAAK,iBAAmBD,EACnC,GAAIC,GAAM,EAAG,CACT,cAAc,KAAK,UAAU,EAC7B,KAAK,iBAAmB,KACxBP,EAAK,WAAW,SAAW,GAC3BA,EAAK,YAAY,SAAW,GAC5BG,EAAS,KAAK,CACtB,QAAS,YACb,CAAC,EACW,MAEZ,CAAQ,MAAMK,EAAe,KAAK,UAAUD,CAAE,EAChCE,EAAaC,EAAeF,CAAY,EAC9CR,EAAK,UAAU,YAAcS,EAAW,KACxCT,EAAK,WAAW,YAAcS,EAAW,MACzCT,EAAK,aAAa,YAAcS,EAAW,QAC3CT,EAAK,aAAa,YAAcS,EAAW,OAC9C,EAED,UAAUF,EAAI,CAKhB,MAAMI,EAAO,KAAK,MAAMJ,EAAK,KAAG,EAC1BK,EAAQ,KAAK,MAAOL,EAAK,MAAO,IAAI,EACpCM,EAAU,KAAK,MAAQN,EAAK,MAAO,KAAQ,GAAM,EACjDO,EAAU,KAAK,MAASP,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,EAEA,SAASJ,EAAe,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACnD,MAAMC,EAAYJ,EAAK,SAAQ,EAAG,OAAS,EAAI,EAAIA,EAAK,SAAU,EAAC,OACvE,OAAAA,EAAOA,EAAK,SAAQ,EAAG,SAASI,EAAW,GAAG,EAC9CH,EAAQA,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACxCC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC5CC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAErC,CAAE,KAAAH,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,SAAST,GAAyB,CAC9BD,EAAM,cAAa,CACvB,CAGAY,EAAUhB,EAAK,WAAYC,CAAO"}